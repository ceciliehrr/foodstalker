---
import getRecipes from "../data/new_recipes.json";

import Layout from "../layouts/Layout.astro";
import Card from "../components/cards/Card.astro";

// emojis
import tadaEmoji from "../assets/tema/party-popper-noto.svg";
import Grid from "../components/Grid.vue";
import Divider from "../components/Divider.astro";

// Hent oppskrifter med "sommer" i nøkkelord
const recipes = getRecipes;
const seniorRecipes = recipes.filter((recipe) =>
  recipe.keywords.includes("senior")
);

export async function getStaticPaths() {
  // Bare én sti for "sommer"
  return [
    {
      params: { keyword: "senior" },
      props: {},
    },
  ];
}

function capitalizeFirstLetter(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}
---

<Layout
  title="Senior Oppskrifter"
  description="Oppdag deilige og enkle oppskrifter for seniorer. Perfekte for alle som ønsker å lage sunne og smakfulle måltider."
>
  <div class="fs-category__emoji">
    <img src={tadaEmoji.src} alt="senior emoji" aria-hidden="true" />
  </div>

  <Divider text={capitalizeFirstLetter("Gratulerer med 40 år, Petter")} />

  <p>
    Velkommen til oppskrifter for eldre – for deg som vet at mat smaker best når
    man har levd lenge nok til å ha smakt det meste. Her finner du retter som er
    snille med tennene, gode for sjelen, passe krydret og litt gamle i stilen
    (men aldri på dato). Vi har samlet våre beste oppskrifter som tar hensyn til
    både fordøyelsen og nostalgien. Velbekomme!
  </p>

  <Divider />
  <Grid>
    {
      seniorRecipes.map((data) => (
        <Card
          href={"/oppskrift/" + data.id}
          title={data.title}
          emoji={data.category}
          image={data.imageurl}
          description={data.description}
          date={data.date}
        />
      ))
    }
  </Grid>
</Layout>

<style lang="scss" scoped>
  @use "sass:map";
  @use "../styles/variables/" as *;
  @use "../styles/mixins/breakpoints" as *;

  .fs-category__emoji {
    display: grid;
    justify-content: center;

    color: var(--fs-black);
    animation: sway 3s cubic-bezier(0.4, 0, 0.2, 1) infinite; /* Myk bevegelse */

    /* Jevnere keyframes for swaying */
    @keyframes sway {
      0% {
        transform: rotate(0deg);
      }
      25% {
        transform: rotate(7deg);
      }
      50% {
        transform: rotate(0deg);
      }
      75% {
        transform: rotate(-7deg);
      }
      100% {
        transform: rotate(0deg);
      }
    }
    & img {
      width: 4rem;
      @include bp("tablet-up") {
        width: 8rem;
      }
      @include bp("tablet-big-up") {
        width: 12rem;
      }
    }
  }
</style>
